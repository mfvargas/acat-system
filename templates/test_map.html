<!DOCTYPE html>
<html>
<head>
    <title>Test Map</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
</head>
<body>
    <h1>Test Map</h1>
    <div id="map" style="height: 400px; width: 100%;"></div>
    
    <script>
        // Crear mapa
        const map = L.map('map').setView([10.0, -84.0], 8);
        
        // Agregar capa de OpenStreetMap
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: 'Â© OpenStreetMap contributors'
        }).addTo(map);
        
        // Coordenadas de prueba
        const testLocation = "SRID=4326;POINT (-82.5 10)";
        console.log("Location string:", testLocation);
        
        // Extraer coordenadas del POINT
        const coordsMatch = testLocation.match(/POINT\(([^)]+)\)/);
        console.log("Coords match:", coordsMatch);
        
        if (coordsMatch) {
            const coords = coordsMatch[1].split(' ');
            const lng = parseFloat(coords[0]);
            const lat = parseFloat(coords[1]);
            
            console.log("Parsed coords:", {lng, lat});
            
            // Agregar marcador
            L.marker([lat, lng]).addTo(map)
                .bindPopup('Denuncia de prueba')
                .openPopup();
                
            // Centrar en el marcador
            map.setView([lat, lng], 12);
        } else {
            console.error("No se pudieron extraer las coordenadas");
        }
    </script>
</body>
</html>
